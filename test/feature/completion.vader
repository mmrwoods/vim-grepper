Before:
  enew!
  only!
  cd include/completion
  let w:testing = 1

After:
  cd -

Execute (flags, match all):
  Assert len(grepper#complete('-', '', v:null)) > 3
  AssertEqual count(grepper#complete('-', '', v:null), '-cword '), 1
  AssertEqual count(grepper#complete('-', '', v:null), '-grepprg '), 1
  AssertEqual count(grepper#complete('-', '', v:null), '-tool '), 1

Execute (flags, match one):
  AssertEqual grepper#complete('-noquickf', '', v:null), ['-noquickfix ']

Execute (flags, match some):
  Assert len(grepper#complete('-no', '', v:null)) > 2
  AssertEqual count(grepper#complete('-no', '', v:null), '-switch '), 0
  AssertEqual count(grepper#complete('-no', '', v:null), '-noswitch '), 1

Execute (flags, -dir options):
  Assert len(grepper#complete('', 'Grepper -dir ', v:null)) > 2
  AssertEqual count(grepper#complete('', 'Grepper -dir ', v:null), 'cwd '), 1
  AssertEqual count(grepper#complete('', 'Grepper -dir ', v:null), 'repo '), 1

Execute (flags, -stop completion):
  Assert grepper#complete('', 'Grepper -stop ', v:null)[0] =~# '\d\+'

Execute (flags, -tool options):
  Assert len(grepper#complete('', 'Grepper -tool ', v:null)) > 1
  AssertEqual count(grepper#complete('', 'Grepper -tool ', v:null), 'grep '), 1

Execute (relative path, empty string):
  AssertEqual grepper#complete('', '', v:null), ['./foo/']

Execute (relative path, whitespace only):
  AssertEqual grepper#complete('  ', '', v:null), ['  ./foo/']

Execute (relative path, leading word chars):
  AssertEqual grepper#complete('f', '', v:null), ['./foo/']

Execute (sub-path, ./ exact match):
  AssertEqual grepper#complete('./', '', v:null), ['./foo/']

Execute (sub-path, ./ and word chars):
  AssertEqual grepper#complete('./f', '', v:null), ['./foo/']

Execute (nested sub-path, e.g. ./foo/):
  AssertEqual grepper#complete('./foo/', '', v:null), ['./foo/bar/']

Execute (absolute path, / exact match):
  AssertEqual count(grepper#complete('/', '', v:null), '/bin/'), 1
  AssertEqual count(grepper#complete('/', '', v:null), '/var/'), 1

Execute (absolute path, / and word chars):
  AssertEqual count(grepper#complete('/b', '', v:null), '/bin/'), 1
  AssertEqual count(grepper#complete('/b', '', v:null), '/var/'), 0
